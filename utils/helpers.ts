import { format, parseISO } from 'date-fns';
import { ar } from 'date-fns/locale';

/**
 * ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯
 */
export function ØªÙˆÙ„ÙŠØ¯_Ù…Ø¹Ø±Ù(): string {
  return Date.now().toString(36) + Math.random().toString(36).substr(2);
}

/**
 * ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
 */
export function ØªÙ†Ø³ÙŠÙ‚_Ø§Ù„ØªØ§Ø±ÙŠØ®(ØªØ§Ø±ÙŠØ®: string, ØªÙ†Ø³ÙŠÙ‚: string = 'dd MMMM yyyy'): string {
  try {
    return format(parseISO(ØªØ§Ø±ÙŠØ®), ØªÙ†Ø³ÙŠÙ‚, { locale: ar });
  } catch {
    return ØªØ§Ø±ÙŠØ®;
  }
}

/**
 * ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
 */
export function ØªÙ†Ø³ÙŠÙ‚_Ø§Ù„ØªØ§Ø±ÙŠØ®_ÙˆØ§Ù„ÙˆÙ‚Øª(ØªØ§Ø±ÙŠØ®: string): string {
  try {
    return format(parseISO(ØªØ§Ø±ÙŠØ®), 'dd MMMM yyyy - HH:mm', { locale: ar });
  } catch {
    return ØªØ§Ø±ÙŠØ®;
  }
}

/**
 * Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† ØªØ§Ø±ÙŠØ®ÙŠÙ† Ø¨Ø§Ù„Ø£ÙŠØ§Ù…
 */
export function Ø­Ø³Ø§Ø¨_Ø§Ù„ÙØ±Ù‚_Ø¨Ø§Ù„Ø£ÙŠØ§Ù…(ØªØ§Ø±ÙŠØ®_Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©: string, ØªØ§Ø±ÙŠØ®_Ø§Ù„Ù†Ù‡Ø§ÙŠØ©: string): number {
  try {
    const Ø¨Ø¯Ø§ÙŠØ© = parseISO(ØªØ§Ø±ÙŠØ®_Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©);
    const Ù†Ù‡Ø§ÙŠØ© = parseISO(ØªØ§Ø±ÙŠØ®_Ø§Ù„Ù†Ù‡Ø§ÙŠØ©);
    const ÙØ±Ù‚ = Ù†Ù‡Ø§ÙŠØ©.getTime() - Ø¨Ø¯Ø§ÙŠØ©.getTime();
    return Math.ceil(ÙØ±Ù‚ / (1000 * 3600 * 24));
  } catch {
    return 0;
  }
}

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
 */
export function Ø§Ù„ØªØ­Ù‚Ù‚_Ù…Ù†_Ø§Ù„Ø¨Ø±ÙŠØ¯_Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ(Ø¨Ø±ÙŠØ¯: string): boolean {
  const Ù†Ù…Ø· = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return Ù†Ù…Ø·.test(Ø¨Ø±ÙŠØ¯);
}

/**
 * ØªÙ‚ØµÙŠØ± Ø§Ù„Ù†Øµ
 */
export function ØªÙ‚ØµÙŠØ±_Ø§Ù„Ù†Øµ(Ù†Øµ: string, Ø§Ù„Ø­Ø¯_Ø§Ù„Ø£Ù‚ØµÙ‰: number = 50): string {
  if (Ù†Øµ.length <= Ø§Ù„Ø­Ø¯_Ø§Ù„Ø£Ù‚ØµÙ‰) return Ù†Øµ;
  return Ù†Øµ.substring(0, Ø§Ù„Ø­Ø¯_Ø§Ù„Ø£Ù‚ØµÙ‰) + '...';
}

/**
 * ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø©
 */
export function formatAmount(Ù…Ø¨Ù„Øº: number, Ø¹Ù…Ù„Ø©: string = 'Ø±ÙŠØ§Ù„'): string {
  const Ù…Ø¨Ù„Øº_Ù…Ù†Ø³Ù‚ = Math.abs(Ù…Ø¨Ù„Øº).toFixed(2);
  return `${Ù…Ø¨Ù„Øº_Ù…Ù†Ø³Ù‚} ${Ø¹Ù…Ù„Ø©}`;
}

// Ø§Ø³Ù… Ù…Ø³ØªØ¹Ø§Ø± Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
export const ØªÙ†Ø³ÙŠÙ‚_Ø§Ù„Ù…Ø¨Ù„Øº = formatAmount;

/**
 * ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª (Ù„Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„ØµØºÙŠØ±Ø©)
 */
export function Ø±Ù‚Ù…_Ø¥Ù„Ù‰_ÙƒÙ„Ù…Ø§Øª(Ø±Ù‚Ù…: number): string {
  const Ø£Ø±Ù‚Ø§Ù… = ['ØµÙØ±', 'ÙˆØ§Ø­Ø¯', 'Ø§Ø«Ù†Ø§Ù†', 'Ø«Ù„Ø§Ø«Ø©', 'Ø£Ø±Ø¨Ø¹Ø©', 'Ø®Ù…Ø³Ø©', 'Ø³ØªØ©', 'Ø³Ø¨Ø¹Ø©', 'Ø«Ù…Ø§Ù†ÙŠØ©', 'ØªØ³Ø¹Ø©'];

  if (Ø±Ù‚Ù… >= 0 && Ø±Ù‚Ù… < 10) {
    return Ø£Ø±Ù‚Ø§Ù…[Ø±Ù‚Ù…];
  }

  return Ø±Ù‚Ù….toString();
}

/**
 * Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙØ¦Ø§Øª
 */
export const Ø£Ù„ÙˆØ§Ù†_Ø§Ù„ÙØ¦Ø§Øª = {
  'Ø·Ø¹Ø§Ù…': '#FF6B6B',
  'Ù…ÙˆØ§ØµÙ„Ø§Øª': '#4ECDC4',
  'Ø¥Ù‚Ø§Ù…Ø©': '#45B7D1',
  'ØªØ±ÙÙŠÙ‡': '#96CEB4',
  'ØªØ³ÙˆÙ‚': '#FFEAA7',
  'ØµØ­Ø©': '#DDA0DD',
  'Ø£Ø®Ø±Ù‰': '#95A5A6',
};

/**
 * Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ÙØ¦Ø§Øª
 */
export const Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª_Ø§Ù„ÙØ¦Ø§Øª = {
  'Ø·Ø¹Ø§Ù…': 'ğŸ½ï¸',
  'Ù…ÙˆØ§ØµÙ„Ø§Øª': 'ğŸš—',
  'Ø¥Ù‚Ø§Ù…Ø©': 'ğŸ¨',
  'ØªØ±ÙÙŠÙ‡': 'ğŸ‰',
  'ØªØ³ÙˆÙ‚': 'ğŸ›ï¸',
  'ØµØ­Ø©': 'ğŸ’Š',
  'Ø£Ø®Ø±Ù‰': 'ğŸ“',
};

/**
 * Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©
 */
export const Ø§Ù„Ø¹Ù…Ù„Ø§Øª_Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø© = [
  { Ø§Ù„Ø±Ù…Ø²: 'Ø¬Ù†ÙŠÙ‡', Ø§Ù„Ø§Ø³Ù…: 'Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ' },
  { Ø§Ù„Ø±Ù…Ø²: 'Ø±ÙŠØ§Ù„', Ø§Ù„Ø§Ø³Ù…: 'Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ' },
  { Ø§Ù„Ø±Ù…Ø²: 'Ø¯Ø±Ù‡Ù…', Ø§Ù„Ø§Ø³Ù…: 'Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ' },
  { Ø§Ù„Ø±Ù…Ø²: 'Ø¯ÙŠÙ†Ø§Ø±', Ø§Ù„Ø§Ø³Ù…: 'Ø¯ÙŠÙ†Ø§Ø± ÙƒÙˆÙŠØªÙŠ' },
  { Ø§Ù„Ø±Ù…Ø²: 'Ø¯ÙˆÙ„Ø§Ø±', Ø§Ù„Ø§Ø³Ù…: 'Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ' },
  { Ø§Ù„Ø±Ù…Ø²: 'ÙŠÙˆØ±Ùˆ', Ø§Ù„Ø§Ø³Ù…: 'ÙŠÙˆØ±Ùˆ' },
];

/**
 * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
 */
export async function Ø§Ù„ØªØ­Ù‚Ù‚_Ù…Ù†_Ø§Ù„Ø§ØªØµØ§Ù„(): Promise<boolean> {
  try {
    const response = await fetch('https://www.google.com', {
      method: 'HEAD',
      mode: 'no-cors',
    });
    return true;
  } catch {
    return false;
  }
}
